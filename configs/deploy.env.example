# Shared environment configuration for Docker Compose deployments.

# Container images used by the stack.
POSTGRES_IMAGE=postgres:15
BACKEND_IMAGE=golang:1.22
FRONTEND_IMAGE=node:20
MINIO_IMAGE=minio/minio:RELEASE.2024-01-13T07-53-03Z
MINIO_MC_IMAGE=minio/mc:RELEASE.2024-01-11T07-46-16Z
YTDLP_IMAGE=ghcr.io/yt-dlp/yt-dlp:2023.11.14

# Database credentials used by PostgreSQL and the backend service.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=vidfriends

# Connection string and port the backend uses to reach PostgreSQL inside Compose.
DATABASE_URL=postgres://postgres:postgres@db:5432/vidfriends?sslmode=disable
POSTGRES_PORT=5432

# Secret for signing backend session cookies. Replace before running in production.
SESSION_SECRET=replace-with-secure-random-string

# Backend runtime configuration.
BACKEND_PORT=8080
VIDFRIENDS_LOG_LEVEL=info
VIDFRIENDS_MIGRATIONS=migrations
VIDFRIENDS_YTDLP_TIMEOUT=30s
VIDFRIENDS_METADATA_CACHE_TTL=15m
YT_DLP_PATH=/usr/local/bin/yt-dlp

# Frontend configuration.
FRONTEND_PORT=5173
FRONTEND_API_BASE_URL=http://backend:8080

# MinIO (S3-compatible) configuration for video storage.
MINIO_ROOT_USER=vidfriends
MINIO_ROOT_PASSWORD=vidfriends-secret
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# S3 bucket settings consumed by the backend.
VIDFRIENDS_S3_ENDPOINT=http://minio:9000
VIDFRIENDS_S3_BUCKET=vidfriends
VIDFRIENDS_S3_REGION=us-east-1
VIDFRIENDS_S3_PUBLIC_BASE_URL=http://localhost:9000/vidfriends
